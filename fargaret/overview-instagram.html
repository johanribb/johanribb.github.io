<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Marbodal</title>
    <meta name="description" content="Marbodal färgåret">
    <link rel="stylesheet" href="base-styles.css?v=1.0">
    <link rel="stylesheet" href="styles.css?v=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

</head>

<body>
    <div style="z-index: 10; position: relative; background: white">
        <component data-name="navigation"></component>

        <div style="height: 197px; width: 100%; overflow-x: overlay; overflow-y: hidden;" class="color-navigation">
            <img style="max-width: none; height: 100%;" src="images/color-nav.png">
        </div>
        <img style="width: 100%;" src="images/mix-moodboard.png">
        <component data-name="text"></component>
    </div>

    <div id="sections">
        <div data-color="878677" class="section-container">
            <div style="background-image: url('images/tall-bild.jpg')" class="section-container__sticky-content"></div>


            <div class="section-container__content">
                <h2>Tall</h2>
                <p>NCS S 7005-Y20R</p>
                <a class="static-slider__cta" href="#">Upplev tall</a>
            </div>
        </div>

        <div data-color="D2C9B7" class="section-container">
            <div style="background-image: url('images/sand-bild.jpg')" class="section-container__sticky-content"></div>
            <div class="section-container__content">
                <h2>Sand</h2>
                <p>NCS S 7005-Y20R</p>
                <a class="static-slider__cta" href="#">Upplev sand</a>
            </div>
        </div>

        <div data-color="61587F" class="section-container">
            <div style="background-image: url('images/bark-bild.jpg')" class="section-container__sticky-content"></div>
            <div class="section-container__content">
                <h2>Bark</h2>
                <p>NCS S 7005-Y20R</p>
                <a class="static-slider__cta" href="#">Upplev bark</a>
            </div>
        </div>
    </div>

    <script>
        $(function () {

            var sections = $('#sections');

            $(window).scroll(function () {
                updateColor();
            });
            updateColor();
        });

        function updateColor() {



            var scrollTop = $(window).scrollTop();
            var windowHeight = $(window).height();


            var maxInView = 0;
            var maxIndex = -1;
            var maxElement = null;
            var factor = 0;
            var next = false;


            $.each(sections.children, function (index, section) {

                var section = $(section);

                var top = section.offset().top;
                var height = section.height();


                var elH = section.outerHeight(),
                    H = windowHeight,
                    r = section[0].getBoundingClientRect(),
                    t = r.top,
                    b = r.bottom;

                var visible = Math.max(0, t > 0 ? Math.min(elH, H - t) : Math.min(b, H));

                if (visible >= maxInView) {
                    maxInView = visible;
                    maxIndex = index;
                    maxElement = section;
                    factor = visible / elH;

                }

            });

            $(sections).find('.section-container__sticky-content').removeClass('active');

            maxElement.find('.section-container__sticky-content').addClass('active');

            if (factor < 0.7) {








            } else {
                //$('body').css('background-color', '#' + (maxElement.attr('data-color')));
            }
        }
    </script>





    <style>
        .section-container {
            height: 100vh;
            color: white;
            text-align: center;
            position: relative;


        }

        .section-container__sticky-content {
            pointer-events: none;
            top: 0;
            position: fixed;
            width: 100vw;
            height: 120vh;
            background-position: center center;
            background-size: cover;
            opacity: 0;
            transition: opacity 0.6s linear;
        }

        .section-container__sticky-content.active {
            opacity: 1;
        }


        .section-container__content {
            width: 100%;
            top: 50%;
            transform: translateY(-100%);
            position: absolute;
        }

        .section-container h2 {
            font-size: 64px;
            font-weight: 700;

        }

        .section-container p {
            font-size: 15px;
            letter-spacing: 1.5px;
            font-weight: 200;

        }

        .section-container .static-slider__cta {}
    </style>
    <script src="scripts.js?v=1.0"></script>
</body>

</html>